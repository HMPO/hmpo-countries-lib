<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [constructor][1]
    *   [Parameters][2]
*   [on][3]
    *   [Parameters][4]
    *   [Examples][5]
*   [start][6]
*   [stop][7]
*   [getAllCountries][8]
    *   [Examples][9]
*   [getOverseasCountries][10]
    *   [Examples][11]
*   [getBirthCountries][12]
    *   [Examples][13]
*   [getResidenceCountries][14]
    *   [Examples][15]
*   [getOverseasResidenceCountries][16]
    *   [Examples][17]
*   [getOverseasBirthCountries][18]
    *   [Examples][19]
*   [getCountryById][20]
    *   [Parameters][21]
    *   [Examples][22]
*   [getCountryBySlug][23]
    *   [Parameters][24]
    *   [Examples][25]
*   [getCountryByDisplayName][26]
    *   [Parameters][27]
    *   [Examples][28]
*   [getCountryDataById][29]
    *   [Parameters][30]
    *   [Examples][31]
*   [getCountryDataBySlug][32]
    *   [Parameters][33]
    *   [Examples][34]
*   [isRestrictedById][35]
    *   [Parameters][36]
    *   [Examples][37]
*   [isActiveById][38]
    *   [Parameters][39]
    *   [Examples][40]
*   [getSlugById][41]
    *   [Parameters][42]
    *   [Examples][43]
*   [sortCountryList][44]
    *   [Parameters][45]
    *   [Examples][46]
*   [dropdownList][47]
    *   [Parameters][48]
    *   [Examples][49]
*   [dropdownListBirthCountries][50]
    *   [Parameters][51]
*   [dropdownListOverseasBirthCountries][52]
    *   [Parameters][53]
*   [dropdownListResidenceCountries][54]
    *   [Parameters][55]
*   [dropdownListOverseasResidenceCountries][56]
    *   [Parameters][57]
*   [onFail][58]
    *   [Parameters][59]
    *   [Examples][60]
*   [onError][61]
    *   [Parameters][62]
    *   [Examples][63]

## constructor

Constructs a new instance of the CountriesCachedModel.

Initializes various country-related lists and mappings, sets up a cached model
for country data, and binds event listeners for handling changes and errors.

### Parameters

*   `options` **[Object][64]** Configuration options for the model. (optional, default `{}`)

    *   `options.key` **[string][65]** A unique key used for storage identification. (optional, default `'countrieslib'`)
    *   `options.countryUrl` **[string][65]** The URL endpoint to fetch country data from.
    *   `options.store` **[Object][64]** The storage mechanism used for caching (e.g., localStorage).
    *   `options.countryInterval` **[number][66]** Polling interval for API data refresh in milliseconds.
    *   `options.storeInterval` **[number][66]** Polling interval for store data refresh in milliseconds.
    *   `options.verbose` **[boolean][67]** Determines whether to use a verbose model (HmpoCachedModel) or a muted one (MutedCachedModel). (optional, default `false`)

## on

Subscribes a handler function to a specific event on the internal country cache.

### Parameters

*   `event` **[string][65]** The name of the event to listen for (e.g., 'change', 'fail', 'error').
*   `handler` **[Function][68]** The callback function to execute when the event is triggered.

### Examples

```javascript
countriesLib.on('change', doSomething());
```

## start

Start polling the provided API URL for country data.

## stop

Stop polling the provided API URL for country data.

## getAllCountries

Retrieve the list of all Countries.

### Examples

```javascript
let allCountries = countriesLib.getAllCountries();
```

Returns **[Array][69]<[Object][64]>** The list of all Countries.

## getOverseasCountries

Retrieve the list of all Overseas Countries.

### Examples

```javascript
let ovsCountries = countriesLib.getOverseasCountries();
```

Returns **[Array][69]<[Object][64]>** The list of Overseas Countries.

## getBirthCountries

Retrieve the list of all Birth Countries.

### Examples

```javascript
let birthCountries = countriesLib.getBirthCountries();
```

Returns **[Array][69]<[Object][64]>** The list of Birth Countries.

## getResidenceCountries

Retrieve the list of all Residence Countries.

### Examples

```javascript
let residenceCountries = countriesLib.getResidenceCountries();
```

Returns **[Array][69]<[Object][64]>** The list of Residence Countries.

## getOverseasResidenceCountries

Retrieve the list of all Overseas Residence Countries.

### Examples

```javascript
let ovsResidenceCountries = countriesLib.getOverseasResidenceCountries();
```

Returns **[Array][69]<[Object][64]>** The list of Overseas Residence Countries.

## getOverseasBirthCountries

### Examples

```javascript
let ovsBirthCountries = countriesLib.getOverseasBirthCountries();
```

Returns **[Array][69]<[Object][64]>** The list of Overseas Birth Countries

## getCountryById

Retrieves country data based on a given country code.

If the input code is `'UK'`, it is normalized to `'GB'` before lookup.

### Parameters

*   `countryCode` **[string][65]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let unitedKingdom = countriesLib.getCountryById('UK'); // return country object for United Kingdom
```

Returns **[Object][64]?** The country object if found, otherwise, `null`.

## getCountryBySlug

Retrieves a country object based on the provided slug (URL-friendly name).

### Parameters

*   `countryNameSlug` **[string][65]** The slugified name of the country (e.g., "united-states").

### Examples

```javascript
let spain = countriesLib.getCountryBySlug('spain'); // return country object for Spain
```

Returns **[Object][64]?** The country object if found, otherwise, `null`.

## getCountryByDisplayName

Retrieves a country object based on the provided display name.

### Parameters

*   `countryDisplayName` **[string][65]** The display name of the country.

### Examples

```javascript
let franceData = countriesLib.getCountryByDisplayName('France'); // return country object for France.
```

Returns **[Object][64]?** The country object if found, otherwise, `null`.

## getCountryDataById

Retrieves country data based on a given country code.

Calls `getCountryById(countryCode)` directly.

If the input code is `'UK'`, it is normalized to `'GB'` before lookup.

### Parameters

*   `countryCode` **[string][65]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let ukCountryData = countriesLib.getCountryDataById('GB'); // return country object for Great Britain
```

Returns **[Object][64]?** The country object if found, otherwise, `null`.

## getCountryDataBySlug

Retrieves a country object based on the provided slug (URL-friendly name).

Calls getCountryBySlug(countryNameSlug) directly.

### Parameters

*   `countryNameSlug` **[string][65]** The slugified name of the country (e.g., "united-states").

### Examples

```javascript
let countryDataForUS = countriesLib.getCountryDataBySlug('united-states'); // return country object for the United States
```

Returns **[Object][64]?** The country object if found, otherwise, `null`.

## isRestrictedById

Checks if a country is restricted using its country code.

### Parameters

*   `id` **[string][65]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let isUKRestricted = countriesLib.isRestrictedById('UK'); // return `false`
```

Returns **[boolean][67]** `true` if the country is restricted, otherwise, `false`.

## isActiveById

Checks if a country is active using its country code.

### Parameters

*   `id` **[string][65]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let isFranceActive = countriesLib.isActiveById('FR'); // return `true`
```

Returns **[boolean][67]** `true` if the country status is 'ACTIVE', otherwise, `false`.

## getSlugById

Retrieve the country name slug using the provided country code.

### Parameters

*   `countryCode` **[string][65]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let countryNameSlug = countriesLib.getSlugById('UK'); // return 'united-kingdom'
```

Returns **([string][65] | [undefined][70])** The slug version of the country's name if found, otherwise `undefined`.

## sortCountryList

Sorts a list of country objects by their `displayName` property.
Moves the country with `countryCode` 'GB' (United Kingdom) to the top of the list if present.

### Parameters

*   `list` **[Array][69]<[Object][64]>** The array of country objects to sort.
    Each object should have at least `displayName` and `countryCode` properties.

### Examples

```javascript
const countries = [
  { displayName: 'Canada', countryCode: 'CA' },
  { displayName: 'United Kingdom', countryCode: 'GB' },
  { displayName: 'Australia', countryCode: 'AU' }
];

const sorted = sortCountryList(countries);
// Result:
// [
//   { displayName: 'United Kingdom', countryCode: 'GB' },
//   { displayName: 'Australia', countryCode: 'AU' },
//   { displayName: 'Canada', countryCode: 'CA' }
// ]
```

Returns **[Array][69]<[Object][64]>** The sorted list with 'GB' (if found) at the beginning.

## dropdownList

Transforms a sorted list of countries into a dropdown-friendly format.
Optionally uses Welsh display names based on the `isWelsh` flag.

### Parameters

*   `list` **[Array][69]<[Object][64]>** The array of country objects to transform.
    Each object should have `countryCode`, `displayName`, and `displayNameWelsh` properties.
*   `isWelsh` **[boolean][67]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

### Examples

```javascript
const countries = [
  { countryCode: 'GB', displayName: 'United Kingdom', displayNameWelsh: 'Deyrnas Unedig' },
  { countryCode: 'FR', displayName: 'France', displayNameWelsh: 'Ffrainc' }
];

const dropdown = dropdownList(countries, false);
// Result:
// [
//   { value: 'GB', text: 'United Kingdom', label: 'United Kingdom' },
//   { value: 'FR', text: 'France', label: 'France' }
// ]
```

Returns **[Array][69]<[Object][64]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListBirthCountries

Returns a dropdown-friendly formatted list of Birth Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][67]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][69]<[Object][64]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListOverseasBirthCountries

Returns a dropdown-friendly formatted list of Overseas Birth Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][67]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][69]<[Object][64]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListResidenceCountries

Returns a dropdown-friendly formatted list of Residence Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][67]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][69]<[Object][64]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListOverseasResidenceCountries

Returns a dropdown-friendly formatted list of Overseas Residence Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][67]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][69]<[Object][64]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## onFail

Handles failures from a country-related outbound request, logging relevant details.

### Parameters

*   `err` **[Object][64]** The error object.
*   `data` **[Object][64]** The response data, which may include an `error` message.
*   `settings` **[Object][64]** The request settings.
*   `statusCode` **[number][66]** The HTTP status code returned from the request.
*   `responseTime` **[number][66]** The time taken for the request to complete, in milliseconds.

### Examples

```javascript
const err = new Error('Request timeout');
err.body = '<html>Error page</html>';

const data = { error: 'Service unavailable' };

const settings = {
  method: 'GET',
  url: 'https://api.example.com/countries'
};

const statusCode = 503;
const responseTime = 1200;

onFail(err, data, settings, statusCode, responseTime);
// Logs:
// Countries CachedModel request failed GET https://api.example.com/countries 503 "Request timeout"
```

## onError

Handles errors that occur during a Countries CachedModel request.

Logs the error using the outbound logger provided by the country cache.

### Parameters

*   `err` **[Error][71]** The error object caught during the request.

### Examples

```javascript
try {
  // Simulate a failing request
  throw new Error('Network unreachable');
} catch (err) {
  onError(err);
  // Logs:
  // Countries CachedModel request error Network unreachable
}
```

[1]: #constructor

[2]: #parameters

[3]: #on

[4]: #parameters-1

[5]: #examples

[6]: #start

[7]: #stop

[8]: #getallcountries

[9]: #examples-1

[10]: #getoverseascountries

[11]: #examples-2

[12]: #getbirthcountries

[13]: #examples-3

[14]: #getresidencecountries

[15]: #examples-4

[16]: #getoverseasresidencecountries

[17]: #examples-5

[18]: #getoverseasbirthcountries

[19]: #examples-6

[20]: #getcountrybyid

[21]: #parameters-2

[22]: #examples-7

[23]: #getcountrybyslug

[24]: #parameters-3

[25]: #examples-8

[26]: #getcountrybydisplayname

[27]: #parameters-4

[28]: #examples-9

[29]: #getcountrydatabyid

[30]: #parameters-5

[31]: #examples-10

[32]: #getcountrydatabyslug

[33]: #parameters-6

[34]: #examples-11

[35]: #isrestrictedbyid

[36]: #parameters-7

[37]: #examples-12

[38]: #isactivebyid

[39]: #parameters-8

[40]: #examples-13

[41]: #getslugbyid

[42]: #parameters-9

[43]: #examples-14

[44]: #sortcountrylist

[45]: #parameters-10

[46]: #examples-15

[47]: #dropdownlist

[48]: #parameters-11

[49]: #examples-16

[50]: #dropdownlistbirthcountries

[51]: #parameters-12

[52]: #dropdownlistoverseasbirthcountries

[53]: #parameters-13

[54]: #dropdownlistresidencecountries

[55]: #parameters-14

[56]: #dropdownlistoverseasresidencecountries

[57]: #parameters-15

[58]: #onfail

[59]: #parameters-16

[60]: #examples-17

[61]: #onerror

[62]: #parameters-17

[63]: #examples-18

[64]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[65]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[66]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[67]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[68]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[69]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[70]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[71]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error
