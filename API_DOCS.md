<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [constructor][1]
    *   [Parameters][2]
*   [on][3]
    *   [Parameters][4]
    *   [Examples][5]
*   [start][6]
*   [stop][7]
*   [getAllCountries][8]
    *   [Examples][9]
*   [getOverseasCountries][10]
    *   [Examples][11]
*   [getBirthCountries][12]
    *   [Examples][13]
*   [getResidenceCountries][14]
    *   [Examples][15]
*   [getResidenceCountriesForContact][16]
    *   [Examples][17]
*   [getOverseasResidenceCountries][18]
    *   [Examples][19]
*   [getOverseasBirthCountries][20]
    *   [Examples][21]
*   [getCountryById][22]
    *   [Parameters][23]
    *   [Examples][24]
*   [getCountryBySlug][25]
    *   [Parameters][26]
    *   [Examples][27]
*   [getCountryByDisplayName][28]
    *   [Parameters][29]
    *   [Examples][30]
*   [getCountryDataById][31]
    *   [Parameters][32]
    *   [Examples][33]
*   [getCountryDataBySlug][34]
    *   [Parameters][35]
    *   [Examples][36]
*   [isRestrictedById][37]
    *   [Parameters][38]
    *   [Examples][39]
*   [areNewApplicationsStoppedForId][40]
    *   [Parameters][41]
    *   [Examples][42]
*   [isActiveById][43]
    *   [Parameters][44]
    *   [Examples][45]
*   [getSlugById][46]
    *   [Parameters][47]
    *   [Examples][48]
*   [sortCountryList][49]
    *   [Parameters][50]
    *   [Examples][51]
*   [dropdownList][52]
    *   [Parameters][53]
    *   [Examples][54]
*   [dropdownListBirthCountries][55]
    *   [Parameters][56]
*   [dropdownListOverseasBirthCountries][57]
    *   [Parameters][58]
*   [dropdownListResidenceCountries][59]
    *   [Parameters][60]
*   [dropdownListOverseasResidenceCountries][61]
    *   [Parameters][62]
*   [onFail][63]
    *   [Parameters][64]
    *   [Examples][65]
*   [onError][66]
    *   [Parameters][67]
    *   [Examples][68]

## constructor

Constructs a new instance of the CountriesCachedModel.

Initializes various country-related lists and mappings, sets up a cached model
for country data, and binds event listeners for handling changes and errors.

### Parameters

*   `options` **[Object][69]** Configuration options for the model. (optional, default `{}`)

    *   `options.key` **[string][70]** A unique key used for storage identification. (optional, default `'countrieslib'`)
    *   `options.countryUrl` **[string][70]** The URL endpoint to fetch country data from.
    *   `options.store` **[Object][69]** The storage mechanism used for caching (e.g., localStorage).
    *   `options.countryInterval` **[number][71]** Polling interval for API data refresh in milliseconds.
    *   `options.storeInterval` **[number][71]** Polling interval for store data refresh in milliseconds.
    *   `options.verbose` **[boolean][72]** Determines whether to use a verbose model (HmpoCachedModel) or a muted one (MutedCachedModel). (optional, default `false`)

## on

Subscribes a handler function to a specific event on the internal country cache.

### Parameters

*   `event` **[string][70]** The name of the event to listen for (e.g., 'change', 'fail', 'error').
*   `handler` **[Function][73]** The callback function to execute when the event is triggered.

### Examples

```javascript
countriesLib.on('change', doSomething());
```

## start

Start polling the provided API URL for country data.

## stop

Stop polling the provided API URL for country data.

## getAllCountries

Retrieve the list of all Countries.

### Examples

```javascript
let allCountries = countriesLib.getAllCountries();
```

Returns **[Array][74]<[Object][69]>** The list of all Countries.

## getOverseasCountries

Retrieve the list of all Overseas Countries.

### Examples

```javascript
let ovsCountries = countriesLib.getOverseasCountries();
```

Returns **[Array][74]<[Object][69]>** The list of Overseas Countries.

## getBirthCountries

Retrieve the list of all Birth Countries.

### Examples

```javascript
let birthCountries = countriesLib.getBirthCountries();
```

Returns **[Array][74]<[Object][69]>** The list of Birth Countries.

## getResidenceCountries

Retrieve the list of all Residence Countries.

### Examples

```javascript
let residenceCountries = countriesLib.getResidenceCountries();
```

Returns **[Array][74]<[Object][69]>** The list of Residence Countries.

## getResidenceCountriesForContact

Retrieve the list of all Residence Countries that can be used for contact phone numbers.

The addressCountryFlag as part of \_residenceCountries is used to denote both countries of application,
as well as countries of address/contact. Therefore some countries will need to be excluded.

### Examples

```javascript
let contactDetailsResidenceCountries = countriesLib.getResidenceCountriesForContact();
```

Returns **[Array][74]<[Object][69]>** The list of Residence Countries.

## getOverseasResidenceCountries

Retrieve the list of all Overseas Residence Countries.

### Examples

```javascript
let ovsResidenceCountries = countriesLib.getOverseasResidenceCountries();
```

Returns **[Array][74]<[Object][69]>** The list of Overseas Residence Countries.

## getOverseasBirthCountries

### Examples

```javascript
let ovsBirthCountries = countriesLib.getOverseasBirthCountries();
```

Returns **[Array][74]<[Object][69]>** The list of Overseas Birth Countries

## getCountryById

Retrieves country data based on a given country code.

If the input code is `'UK'`, it is normalized to `'GB'` before lookup.

### Parameters

*   `countryCode` **[string][70]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let unitedKingdom = countriesLib.getCountryById('UK'); // return country object for United Kingdom
```

Returns **[Object][69]?** The country object if found, otherwise, `null`.

## getCountryBySlug

Retrieves a country object based on the provided slug (URL-friendly name).

### Parameters

*   `countryNameSlug` **[string][70]** The slugified name of the country (e.g., "united-states").

### Examples

```javascript
let spain = countriesLib.getCountryBySlug('spain'); // return country object for Spain
```

Returns **[Object][69]?** The country object if found, otherwise, `null`.

## getCountryByDisplayName

Retrieves a country object based on the provided display name.

### Parameters

*   `countryDisplayName` **[string][70]** The display name of the country.

### Examples

```javascript
let franceData = countriesLib.getCountryByDisplayName('France'); // return country object for France.
```

Returns **[Object][69]?** The country object if found, otherwise, `null`.

## getCountryDataById

Retrieves country data based on a given country code.

Calls `getCountryById(countryCode)` directly.

If the input code is `'UK'`, it is normalized to `'GB'` before lookup.

### Parameters

*   `countryCode` **[string][70]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let ukCountryData = countriesLib.getCountryDataById('GB'); // return country object for Great Britain
```

Returns **[Object][69]?** The country object if found, otherwise, `null`.

## getCountryDataBySlug

Retrieves a country object based on the provided slug (URL-friendly name).

Calls getCountryBySlug(countryNameSlug) directly.

### Parameters

*   `countryNameSlug` **[string][70]** The slugified name of the country (e.g., "united-states").

### Examples

```javascript
let countryDataForUS = countriesLib.getCountryDataBySlug('united-states'); // return country object for the United States
```

Returns **[Object][69]?** The country object if found, otherwise, `null`.

## isRestrictedById

Checks if a country is restricted using its country code.

### Parameters

*   `id` **[string][70]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let isUKRestricted = countriesLib.isRestrictedById('UK'); // return `false`
```

Returns **[boolean][72]** `true` if the country is restricted, otherwise, `false`.

## areNewApplicationsStoppedForId

Checks if the stopNewApplications flag by country code is enabled.

### Parameters

*   `id` **[string][70]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let areNewApplicationsStopped = countriesLib.areNewApplicationsStoppedForId('FR'); // return `false`
```

Returns **[boolean][72]** `true` if the new applications are stopped for that country is restricted, otherwise, `false`.

## isActiveById

Checks if a country is active using its country code.

### Parameters

*   `id` **[string][70]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let isFranceActive = countriesLib.isActiveById('FR'); // return `true`
```

Returns **[boolean][72]** `true` if the country status is 'ACTIVE', otherwise, `false`.

## getSlugById

Retrieve the country name slug using the provided country code.

### Parameters

*   `countryCode` **[string][70]** The country code (e.g., 'US', 'UK', 'FR').

### Examples

```javascript
let countryNameSlug = countriesLib.getSlugById('UK'); // return 'united-kingdom'
```

Returns **([string][70] | [undefined][75])** The slug version of the country's name if found, otherwise `undefined`.

## sortCountryList

Sorts a list of country objects by their `displayName` property.
Moves the country with `countryCode` 'GB' (United Kingdom) to the top of the list if present.

### Parameters

*   `list` **[Array][74]<[Object][69]>** The array of country objects to sort.
    Each object should have at least `displayName` and `countryCode` properties.

### Examples

```javascript
const countries = [
  { displayName: 'Canada', countryCode: 'CA' },
  { displayName: 'United Kingdom', countryCode: 'GB' },
  { displayName: 'Australia', countryCode: 'AU' }
];

const sorted = sortCountryList(countries);
// Result:
// [
//   { displayName: 'United Kingdom', countryCode: 'GB' },
//   { displayName: 'Australia', countryCode: 'AU' },
//   { displayName: 'Canada', countryCode: 'CA' }
// ]
```

Returns **[Array][74]<[Object][69]>** The sorted list with 'GB' (if found) at the beginning.

## dropdownList

Transforms a sorted list of countries into a dropdown-friendly format.
Optionally uses Welsh display names based on the `isWelsh` flag.

### Parameters

*   `list` **[Array][74]<[Object][69]>** The array of country objects to transform.
    Each object should have `countryCode`, `displayName`, and `displayNameWelsh` properties.
*   `isWelsh` **[boolean][72]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

### Examples

```javascript
const countries = [
  { countryCode: 'GB', displayName: 'United Kingdom', displayNameWelsh: 'Deyrnas Unedig' },
  { countryCode: 'FR', displayName: 'France', displayNameWelsh: 'Ffrainc' }
];

const dropdown = dropdownList(countries, false);
// Result:
// [
//   { value: 'GB', text: 'United Kingdom', label: 'United Kingdom' },
//   { value: 'FR', text: 'France', label: 'France' }
// ]
```

Returns **[Array][74]<[Object][69]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListBirthCountries

Returns a dropdown-friendly formatted list of Birth Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][72]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][74]<[Object][69]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListOverseasBirthCountries

Returns a dropdown-friendly formatted list of Overseas Birth Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][72]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][74]<[Object][69]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListResidenceCountries

Returns a dropdown-friendly formatted list of Residence Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][72]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][74]<[Object][69]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## dropdownListOverseasResidenceCountries

Returns a dropdown-friendly formatted list of Overseas Residence Countries.
Optionally uses Welsh display names based on the `isWelsh` flag.

A wrapper function around `dropdownList(list, isWelsh)`.

### Parameters

*   `isWelsh` **[boolean][72]** Whether to use the Welsh display name (`displayNameWelsh`) instead of the default (`displayName`).

Returns **[Array][74]<[Object][69]>** An array of objects formatted for use in dropdowns,
each containing `value`, `text`, and `label` properties.

## onFail

Handles failures from a country-related outbound request, logging relevant details.

### Parameters

*   `err` **[Object][69]** The error object.
*   `data` **[Object][69]** The response data, which may include an `error` message.
*   `settings` **[Object][69]** The request settings.
*   `statusCode` **[number][71]** The HTTP status code returned from the request.
*   `responseTime` **[number][71]** The time taken for the request to complete, in milliseconds.

### Examples

```javascript
const err = new Error('Request timeout');
err.body = '<html>Error page</html>';

const data = { error: 'Service unavailable' };

const settings = {
  method: 'GET',
  url: 'https://api.example.com/countries'
};

const statusCode = 503;
const responseTime = 1200;

onFail(err, data, settings, statusCode, responseTime);
// Logs:
// Countries CachedModel request failed GET https://api.example.com/countries 503 "Request timeout"
```

## onError

Handles errors that occur during a Countries CachedModel request.

Logs the error using the outbound logger provided by the country cache.

### Parameters

*   `err` **[Error][76]** The error object caught during the request.

### Examples

```javascript
try {
  // Simulate a failing request
  throw new Error('Network unreachable');
} catch (err) {
  onError(err);
  // Logs:
  // Countries CachedModel request error Network unreachable
}
```

[1]: #constructor

[2]: #parameters

[3]: #on

[4]: #parameters-1

[5]: #examples

[6]: #start

[7]: #stop

[8]: #getallcountries

[9]: #examples-1

[10]: #getoverseascountries

[11]: #examples-2

[12]: #getbirthcountries

[13]: #examples-3

[14]: #getresidencecountries

[15]: #examples-4

[16]: #getresidencecountriesforcontact

[17]: #examples-5

[18]: #getoverseasresidencecountries

[19]: #examples-6

[20]: #getoverseasbirthcountries

[21]: #examples-7

[22]: #getcountrybyid

[23]: #parameters-2

[24]: #examples-8

[25]: #getcountrybyslug

[26]: #parameters-3

[27]: #examples-9

[28]: #getcountrybydisplayname

[29]: #parameters-4

[30]: #examples-10

[31]: #getcountrydatabyid

[32]: #parameters-5

[33]: #examples-11

[34]: #getcountrydatabyslug

[35]: #parameters-6

[36]: #examples-12

[37]: #isrestrictedbyid

[38]: #parameters-7

[39]: #examples-13

[40]: #arenewapplicationsstoppedforid

[41]: #parameters-8

[42]: #examples-14

[43]: #isactivebyid

[44]: #parameters-9

[45]: #examples-15

[46]: #getslugbyid

[47]: #parameters-10

[48]: #examples-16

[49]: #sortcountrylist

[50]: #parameters-11

[51]: #examples-17

[52]: #dropdownlist

[53]: #parameters-12

[54]: #examples-18

[55]: #dropdownlistbirthcountries

[56]: #parameters-13

[57]: #dropdownlistoverseasbirthcountries

[58]: #parameters-14

[59]: #dropdownlistresidencecountries

[60]: #parameters-15

[61]: #dropdownlistoverseasresidencecountries

[62]: #parameters-16

[63]: #onfail

[64]: #parameters-17

[65]: #examples-19

[66]: #onerror

[67]: #parameters-18

[68]: #examples-20

[69]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[70]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[71]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[72]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[73]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[74]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[75]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[76]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error
